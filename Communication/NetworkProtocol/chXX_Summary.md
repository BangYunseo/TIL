#  Chapter XX. 네트워크 프로토콜 요약
> 1절. 컴퓨터 네트워크와 인터넷_1장
>
> 2절. 링크 계층과 근거리 네트워크_2장
>
> 3절. 링크 계층과 근거리 네트워크(ARP)_3장
>
> 4절. 네트워크 계층_4장
>
> 5절. 5절. IP 프로토콜과 데이터그램_5장
>
> 6절. IP의 클래스와 서브넷_6장
>
> 7절. 라우팅(Routing)_7장

## 1절. 컴퓨터 네트워크와 인터넷_1장
#### 인터넷 구조
* 인터넷
    * 여러 네트워크가 연결된 "네트워크의 네트워크"
    * 패킷 스위칭, 회선 스위칭 방식을 통해 데이터 전송 관리
        * 패킷 스위칭
        * 데이터를 작은 패킷으로 분할 전송
        * 각 패킷이 목적지까지 다양한 경로로 전송 가능

#### 네트워크 엣지와 코어
* 네트워크 엣지
    * 사용자가 연결되는 호스트
        * 클라이언트
        * 서버

* 네트워크 코어
    * 라우터의 메쉬로 구성되어 패킷 전달 

* 엣지에서 네트워크에 접근하기 위한 방
    * 다양한 물리적 매체
    * 유선 및 무선 접근 방식 사용

#### 프로토콜과 계층
* 프로토콜
    * 통신 규약
    * 인터넷에서는 여러 계층이 상호작용하여 데이터를 전달

* 계층    
    * OSI 모델의 7계층 구조 
    * TCP/IP 모델의 5계층 구조

* 계층화 구조의 특징 
    * 네트워크 유지보수 용이
    * 각 계층의 변경이 다른 계층에 미치는 영향 최소화

#### 패킷 손실과 지연
* 패킷 손실
    * 패킷 전송 시 큐(대기열)가 과부하될 경우 
* 네트워크 지연
    * 처리 지연, 전송 지연, 큐잉 지연, 전파 지연 등
    * 지연 요소는 데이터 전송의 성능을 결정짓는 중요한 요소

#### 네트워크 성능
* 성능의 중요 지표
    * 전송 속도와 지연, 패킷 손실율 등
        * 전송 속도
            * 특정 시간 동안 송신에서 수신으로 전송되는 비트의 양 
            * 병목 링크가 전체 전송 속도를 제한하는 요소

## 2절. 링크 계층과 근거리 네트워크_2장
#### 링크 계층
* 데이터그램을 인접 노드 간에 전송
* 주로 프레임 형태로 패킷을 캡슐화
* 링크 접근 및 에러 검출 등의 기능을 제공
* 네트워크 계층을 지원

#### 다중 접근 프로토콜
* 두 가지 주요 링크 유형(점대점 및 브로드캐스트) 기반
* 다양한 다중 접근 프로토콜(ALOHA, CSMA/CD 등) 사용
    * 이러한 프로토콜은 충돌 발생 시 대처 방안, 충돌 감지를 통해 효율적인 전송 관리

#### 이더넷
* 일반적으로 사용하는 유선 LAN 기술
* 10Mbps부터 400Gbps까지 다양한 속도 지원
* 이더넷 프레임 구조
    * 목적지(destination), 발신지 주소, 데이터, 오류 검출 코드(CRC) 포함
    * 프레임의 무결성 보장을 위해 오류 검출 메커니즘 보유

#### 스위치와 라우터 차이
* 스위치
    * 링크 계층에서 작동
    * MAC 주소를 기반으로 학습 및 패킷을 전달
* 라우터
    * 네트워크 계층에서 작동 
    * IP 주소를 기반으로 경로를 계산 및 패킷을 전달

#### 이더넷 전송 방식
* 유니캐스트, 브로드캐스트, 멀티캐스트의 세 가지 방식
* 각각 목적지 시스템에 따라 다르게 동작

## 3절. 링크 계층과 근거리 네트워크(ARP)_3장
#### MAC 주소와 IP 주소
* IP 주소
    * 네트워크 계층에서 사용되는 논리 주소
* MAC 주소
    * 물리 계층에서 사용되는 고유한 물리 주소
* ARP
    * IP 주소를 MAC 주소로 변환해주는 역할

#### ARP 테이블
* IP 노드
    * IP와 MAC 주소의 매핑 정보를 저장하는 ARP 테이블을 보유
        * 매핑 정보는 시간(Time to Live, TTL) 동안 유지

#### ARP 작동 원리
* 송신자
    * 목적지 MAC 주소가 없을 때 ARP 요청 - 브로드캐스트
        * 해당 IP를 가진 장치가 MAC 주소를 응답(request) 전송 
        * 수신된 정보(응답 : request)를 ARP 테이블에 저장해 재사용

#### ARP 패킷 형식
* ARP 요청과 응답에 포함되는 정보
    * 송신자와 수신자의 MAC 및 IP 주소
    * 하드웨어와 프로토콜의 주소 길이
    * 동작(Operation) 필드 등

#### 그라티투스 ARP(Gratuitous ARP)
* 주로 네트워크 접속 시 사용
* 중복 IP 주소 감지 및 네트워크 장치의 ARP 테이블 갱신에 활용

## 4절. 네트워크 계층_4장
#### 네트워크 계층의 핵심 역할
* 라우팅(Routing)
    * 패킷이 출발지에서 목적지까지 최적 경로를 따라 이동하도록 경로 설정
* 포워딩(Forwarding)
    * 라우터가 수신된 패킷을 적절한 출력 포트로 전달

#### 데이터 평면과 제어 평면
* 데이터 평면
    * 각 라우터가 개별적으로 수행하는 작업
    * 입력 포트에서 출력 포트로 패킷을 이동
* 제어 평면
    * 네트워크 전반의 경로를 설정
    * 전통적 라우팅 알고리즘 또는 SDN(Software-Defined Networking)과 같은 기법을 사용

#### 패킷 전달 방식
* 데이터그램 방식(비연결형 서비스)
    * 모든 패킷이 독립적으로 처리
    * 서로 다른 경로를 따라 전달
* 가상 회선 방식(연결형 서비스)
    * 패킷 전송 전에 가상의 경로를 설정
    * 동일한 경로를 따라 전달

## 5절. IP 프로토콜과 데이터그램_5장
#### IP 프로토콜 특징
* 비연결형 프로토콜
* 각 데이터그램 독립적 처리
* 최선 노력(Best-Effort) 서비스를 제공
* 전송 오류 검출이나 재전송을 보장 X

#### IP 데이터그램 구조
* 헤더
    * 20 ~ 60바이트 구성
    * 버전, 헤더 길이, 서비스 유형(TOS), TTL, 프로토콜 필드 등 포함
* 단편화(Fragmentation)
    * 네트워크의 MTU보다 큰 패킷을 여러 개의 단편으로 나누어 전송
    * 수신 측에서 재조립

#### DHCP(Dynamic Host Configuration Protocol)
* IP 주소를 동적 할당
* 네트워크 접속 시 필요한 정보 제공
    * ex) IP 주소, 서브넷 마스크, 게이트웨이 등

#### IPv4와 IPv6

![IPv4, IPv6](https://github.com/BangYunseo/TIL/blob/main/Communication/NetworkProtocol/Image/chXX/IPv.PNG)

## 6절. IP의 클래스와 서브넷_6장
#### IP 주소의 클래스

# IP 주소 클래스별 구조와 범위

|**클래스**|**네트워크 ID 비트 수**|**호스트 ID 비트 수**|**IP 주소 범위**| **호스트 연결 가능 수**| **성질 및 용도**|
|:---:|:---|:---|:---|:---|:----|
|**A 클래스**|8비트|24비트|1.0.0.0 ~ 126.255.255.255|16,777,214|- 대규모 네트워크에 사용(ISP, 대기업 등)<br>- 첫 번째 비트는 항상 `0`으로 시작<br>- 루프백(127.x.x.x) 제외 <br> - 매우 넓은 주소 범위 제공|
|**B 클래스**|16비트|16비트|128.0.0.0 ~ 191.255.255.255|65,534|- 중간 규모 네트워크에 사용(대학, 기업 등)<br>- 첫 두 비트는 항상 `10`으로 시작<br>- IPv4에서 흔히 사용<br> - 네트워크와 호스트 주소의 균형 제공|
|**C 클래스**|24비트|8비트|192.0.0.0 ~ 223.255.255.255|254|- 소규모 네트워크에 적합(가정, 소기업 등)<br>- 첫 세 비트는 항상 `110`으로 시작<br>- 호스트 수가 적고, 네트워크 수가 많음 <br> - 흔히 라우터 설정에 사용되는 주소 대역|
|**D 클래스**|-|-|224.0.0.0 ~ 239.255.255.255|멀티캐스트용|- **멀티캐스트** 통신에 사용 <br> - 여러 수신자에게 동시에 데이터 전송 가능 <br> - 비디오 스트리밍 및 IPTV 같은 서비스에 활용 |
|**E 클래스**|-|-|240.0.0.0 ~ 255.255.255.255|연구 및 테스트 용도| - **실험 및 테스트** 용도로 예약<br>- 실사용 불가<br>- 일부 네트워크 환경에서 내부 테스트용으로 사용|

#### 서브넷과 서브넷 마스크
* 서브넷 마스크
    * 네트워크와 호스트를 구분하기 위해 사용
    * 기본 서브넷 마스크는 클래스에 따라 상이

* 서브넷팅
    * 큰 네트워크를 작은 네트워크로 나누는 작업

* 슈퍼넷팅
    * 여러 네트워크를 하나로 합치는 작업

#### CIDR(Classless Inter-Domain Routing)
* 고정된 클래스 대신 유연하게 네트워크를 분할하고 결합하는 방식

## 7절. 라우팅(Routing)_7장
#### 네트워크 제어 평면의 구조(Network Layer Control Plane)
* 전통적인 라우팅 알고리즘
    * 각 라우터에 개별 라우팅 알고리즘이 설치되어 작동하는 방식
* 소프트웨어 정의 네트워킹(SDN)
    * 중앙 컨트롤러가 모든 라우터의 포워딩 테이블을 계산하고 설치하는 방식
* 라우팅 프로토콜의 구현, OSPF(Open Shortest Path First), BGP(Border Gateway Protocol), ICMP(Internet Control Message Protocol), SNMP(Simple Network Management Protocol).

#### 라우팅 알고리즘
* 링크 상태 알고리즘(Link State Algorithm)
    * 모든 라우터가 네트워크 전체의 링크 정보 인지
    * 다익스트라(Dijkstra) 알고리즘을 사용해 최단 경로를 계산
* 거리 벡터 알고리즘(Distance Vector Algorithm)
    * 각 라우터가 인접 라우터와의 거리 정보를 교환 
    * 벨만-포드(Bellman-Ford) 알고리즘을 사용해 최단 경로를 계산

#### OSPF (Open Shortest Path First)
* 링크 상태 라우팅 프로토콜
* 라우터들이 전체 네트워크 토폴로지 정보를 교환
* 다익스트라 알고리즘을 사용해 최단 경로를 결정
* 이를 기반으로 포워딩 테이블 작성
* ISP 내부에서 사용

* 각 라우터 기능
    * 네트워크의 링크 상태를 서로 플러딩(flooding)
    * 전체 네트워크의 최단 경로를 계산

* 계층적 OSPF
    * 지역(Local Area)
        * 각 지역 내부의 링크 정보만 교환
    * 백본(Backbone)
        * 백본은 지역 간의 경로 정보를 요약해서 전달



#### BGP(Border Gateway Protocol)
* 자율 시스템(AS) 간 라우팅을 위한 프로토콜
* AS 경로 정보(AS-PATH)와 다음 홉(NEXT-HOP) 정보를 사용하여 경로 결정

* eBGP
    * 외부 AS 간 경로 정보를 교환

* iBGP
    * 내부 AS에서 경로 정보를 공유

* 정책 기반 라우팅
    * 각 AS는 경로 수용 여부를 결정하는 정책 보유
    * 이를 통해 경로 광고를 제한하거나 조정


#### 라우팅 확장성과 정책
* 확장성
    * 모든 목적지를 라우팅 테이블에 저장 불가
    * AS를 기반으로 한 계층적 라우팅이 필요
* 핫 포테이토 라우팅
    * 같은 목적지로 가는 여러 경로 중 내부 비용이 가장 낮은 경로를 선택하는 방식
    * AS 간 경로 수는 고려 X

#### 라우팅 알고리즘 비교
* 링크 상태 알고리즘(Link Status Algorithm)
    * 네트워크 전체 정보를 알고 있어 정확
    * 메시지와 계산 비용이 매우 큼
* 거리 벡터 알고리즘(DV)
    * 인접한 라우터 간 정보 교환을 통해 경로를 계산하는 방식
    * 비용은 적지만 경로 결정에 시간 소모 가능성

#### BGP 경로 선택
* 경로 선택 기준 
    * 로컬 우선순위, AS 경로 길이 등의 기준 사용
    * 핫 포테이토 라우팅을 적용해 경로 선택 시 내부 비용 고려